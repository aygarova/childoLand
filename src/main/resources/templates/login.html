<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="shortcut icon" type="image/x-icon" href="/images/logoIndex.jpg" />
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/login.css">
    <title>ЧИЛДОЛАНД</title>
</head>
<body>
<header>
    <a id="logo" style="float: left;" href="/home">
        <img  src="/images/logoChildoLand.jpg" alt="logo" style="max-width: 200px;">
    </a>
    <nav>
        <ul id="field">
            <th:block sec:authorize="!isAuthenticated()">
                <li id="home"><a href="/start">НАЧАЛО</a></li>
                <li id="login"><a href="/login">ВХОД</a></li>
                <li id="logout"><a href="/register">РЕГИСТРАЦИЯ</a></li>
            </th:block>
            <li> <div id="house" sec:authorize="isAuthenticated()"><a  th:href="@{/home}"></a>
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
                    <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
                </svg></div></li>
            <li> <div id="exit" sec:authorize="isAuthenticated()"><a  th:href="@{/logout}"></a>
                <svg fill="#ffa40d" height="90px" width="90px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-36.3 -36.3 127.60 127.60" xml:space="preserve" transform="matrix(1, 0, 0, 1, 0, 0)" stroke="#ffa40d" stroke-width="1.3199999999999998"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M53.924,23.618c-0.051-0.123-0.125-0.234-0.217-0.327L41.708,11.293c-0.391-0.391-1.023-0.391-1.414,0 s-0.391,1.023,0,1.414L50.587,23H29.001c-0.553,0-1,0.447-1,1s0.447,1,1,1h21.586L40.294,35.293c-0.391,0.391-0.391,1.023,0,1.414 C40.489,36.902,40.745,37,41.001,37s0.512-0.098,0.707-0.293l11.999-11.999c0.093-0.092,0.166-0.203,0.217-0.326 C54.025,24.138,54.025,23.862,53.924,23.618z"></path> <path d="M36.001,29c-0.553,0-1,0.447-1,1v16h-10V8c0-0.436-0.282-0.821-0.697-0.953L8.442,2h26.559v16c0,0.553,0.447,1,1,1 s1-0.447,1-1V1c0-0.553-0.447-1-1-1h-34c-0.032,0-0.06,0.015-0.091,0.018C1.854,0.023,1.805,0.036,1.752,0.05 C1.658,0.075,1.574,0.109,1.493,0.158C1.467,0.174,1.436,0.174,1.411,0.192C1.38,0.215,1.356,0.244,1.328,0.269 c-0.017,0.016-0.035,0.03-0.051,0.047C1.201,0.398,1.139,0.489,1.093,0.589c-0.009,0.02-0.014,0.04-0.022,0.06 C1.029,0.761,1.001,0.878,1.001,1v46c0,0.125,0.029,0.243,0.072,0.355c0.014,0.037,0.035,0.068,0.053,0.103 c0.037,0.071,0.079,0.136,0.132,0.196c0.029,0.032,0.058,0.061,0.09,0.09c0.058,0.051,0.123,0.093,0.193,0.13 c0.037,0.02,0.071,0.041,0.111,0.056c0.017,0.006,0.03,0.018,0.047,0.024l22,7C23.797,54.984,23.899,55,24.001,55 c0.21,0,0.417-0.066,0.59-0.192c0.258-0.188,0.41-0.488,0.41-0.808v-6h11c0.553,0,1-0.447,1-1V30 C37.001,29.447,36.553,29,36.001,29z"></path> </g> </g></svg>            </div></li>
        </ul>
    </nav>
</header>
<main>
    <div class="login-container">
        <h2><b>ВХОД</b></h2>
        <div class="row g-3">
            <form th:action="@{/login}" method="POST" th:object="${userLoginDto}">
                <h3 id="invalidEmail" th:if="${isFound == false}" class="text-center text-light form-text bg-danger rounded">Невалиден имей или парола</h3>
                <div>
                    <div id="emailName" class="col-auto">
                        <label for="inputEmail" class="col-form-label text-light">Емейл</label>
                    </div>
                    <div id="emailField" class="col-auto">
                        <input th:field="*{email}" th:errorclass="bg-danger" type="text" name="email" id="inputEmail" class="form-control"
                               aria-describedby="emailHelpInline">
                    </div>
                    <div id="emailErr" class="col-auto">
                        <small th:if="${#fields.hasErrors('email')}" th:errors="*{email}"  id="emailError" class="text-light form-text bg-danger rounded">Дължината на имейла трябва да бъде между 3 и 20 символа</small>
                    </div>
                </div>
                <div>
                    <div id="passName" class="col-auto">
                        <label for="inputPassword" class="col-form-label text-light">Парола</label>
                    </div>
                    <div id="passField" class="col-auto">
                        <input th:field="*{password}" th:errorclass="bg-danger" type="password" name="password" id="inputPassword" class="form-control"
                               aria-describedby="passwordHelpInline">
                    </div>
                    <div id="passErr" class="col-auto">
                        <small th:if="${#fields.hasErrors('password')}" th:errors="*{password}" id="passwordError" class="text-light form-text bg-danger rounded">Дължината на паролата трябва да е между 5 и 20 символа</small>
                    </div>
                </div>
                <div>
                    <div id="roleName" class="col-auto">
                        <label for="role" class="col-form-label text-light">Вие сте:</label>
                        <select id="role" th:field="*{role}" class="form-select">
                            <option value="parent">Родител</option>
                            <option value="teacher">Учител</option>
                            <option value="admin">Администратор</option>
                        </select>
                    </div>
                </div>
                <div class="d-flex justify-content-center mt-2">
                    <button class="button" type="submit">ВХОД</button>
                </div>
            </form>
        </div>
    </div>
    <br><br><br>
</main>
<footer>
    <div class="footer">
        &copy; ЧИЛДОЛАНД 2024
    </div>
</footer>
</body>
</html>